<!DOCTYPE html>
<html lang="<%= @locale %>">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🌌 Zeropoint - The Universal Matrix</title>
    
    <!-- Stimulus -->
    <script src="https://unpkg.com/@hotwired/stimulus@3.2.2/dist/stimulus.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Zeropoint Stimulus Controllers -->
    <script type="module">
        import { Application } from "@hotwired/stimulus"
        import UniversalMatrixController from "<%= asset_path('zeropoint/universal_matrix_controller.js') %>"
        
        const application = Application.start()
        application.register("universal-matrix", UniversalMatrixController)
    </script>
    
    <style>
        /* Zeropoint Matrix Styles */
        .matrix-grid {
            display: grid;
            gap: 4px;
            padding: 20px;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            border-radius: 16px;
            box-shadow: 0 0 50px rgba(0, 255, 255, 0.3);
        }
        
        .matrix-cell {
            aspect-ratio: 1;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .matrix-cell:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        }
        
        .matrix-cell.active {
            background: linear-gradient(45deg, #00ff88, #00ffff);
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.8);
        }
        
        .matrix-cell.vortex {
            background: linear-gradient(45deg, #ff0080, #8000ff);
            animation: vortex-spin 0.5s ease-in-out;
        }
        
        .matrix-cell.cosmic {
            background: linear-gradient(45deg, #ff8000, #ffff00);
            animation: cosmic-pulse 0.8s ease-in-out;
        }
        
        .matrix-cell.intelligence {
            background: linear-gradient(45deg, #0080ff, #8000ff);
            animation: intelligence-glow 1s ease-in-out;
        }
        
        .matrix-cell.scalability {
            background: linear-gradient(45deg, #ff8000, #ff0080);
            animation: scalability-pulse 0.6s ease-in-out;
        }
        
        .matrix-cell.observer {
            background: linear-gradient(45deg, #00ffff, #0080ff);
            animation: observer-wave 0.7s ease-in-out;
        }
        
        .matrix-cell.golden {
            background: linear-gradient(45deg, #ffd700, #ff8000);
            animation: golden-harmony 0.9s ease-in-out;
        }
        
        .matrix-cell.quantum {
            background: linear-gradient(45deg, #8000ff, #ff0080);
            animation: quantum-superposition 0.4s ease-in-out;
        }
        
        .matrix-cell.consciousness {
            background: linear-gradient(45deg, #ff0080, #00ff88);
            animation: consciousness-expansion 1.2s ease-in-out;
        }
        
        .matrix-cell.energy {
            background: linear-gradient(45deg, #ffff00, #ff8000);
            animation: energy-flow 0.8s ease-in-out;
        }
        
        .high-impact {
            border: 2px solid #00ff88;
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.5);
        }
        
        .medium-impact {
            border: 2px solid #ffff00;
            box-shadow: 0 0 15px rgba(255, 255, 0, 0.5);
        }
        
        .low-impact {
            border: 2px solid #ff8000;
            box-shadow: 0 0 15px rgba(255, 128, 0, 0.5);
        }
        
        .feature-content h4 {
            font-size: 0.8rem;
            font-weight: bold;
            margin-bottom: 4px;
            color: white;
        }
        
        .impact-score {
            font-size: 1.2rem;
            font-weight: bold;
            color: #00ffff;
            margin-bottom: 4px;
        }
        
        .category-badge {
            font-size: 0.6rem;
            padding: 2px 6px;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            text-transform: uppercase;
        }
        
        .insight-item {
            padding: 12px;
            margin: 8px 0;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid;
        }
        
        .insight-item.positive {
            border-left-color: #00ff88;
        }
        
        .insight-item.negative {
            border-left-color: #ff0080;
        }
        
        .insight-item.neutral {
            border-left-color: #ffff00;
        }
        
        .sentiment-badge {
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 4px;
            margin-left: 8px;
        }
        
        .sentiment-badge.positive {
            background: #00ff88;
            color: black;
        }
        
        .sentiment-badge.negative {
            background: #ff0080;
            color: white;
        }
        
        .sentiment-badge.neutral {
            background: #ffff00;
            color: black;
        }
        
        .cluster-badge {
            font-size: 0.6rem;
            padding: 2px 6px;
            border-radius: 4px;
            background: rgba(0, 255, 255, 0.3);
            color: white;
            margin-left: 8px;
        }
        
        .feature-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            padding: 24px;
            border-radius: 12px;
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: white;
            max-width: 400px;
            text-align: center;
        }
        
        .geo-info {
            background: rgba(0, 255, 255, 0.1);
            padding: 16px;
            border-radius: 8px;
            border: 1px solid rgba(0, 255, 255, 0.3);
        }
        
        .control-panel {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 255, 255, 0.3);
        }
        
        .cosmic-flow-indicator {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            position: relative;
        }
        
        .cosmic-flow-bar {
            height: 100%;
            background: linear-gradient(90deg, #00ff88, #00ffff, #ff0080);
            animation: cosmic-flow 3s ease-in-out infinite;
        }
        
        .intelligence-meter {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        
        .intelligence-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff0080, #8000ff, #00ffff);
            transition: width 0.5s ease;
        }
        
        /* Animations */
        @keyframes vortex-spin {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.2); }
            100% { transform: rotate(360deg) scale(1); }
        }
        
        @keyframes cosmic-pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.3); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes intelligence-glow {
            0% { box-shadow: 0 0 5px rgba(0, 128, 255, 0.5); }
            50% { box-shadow: 0 0 20px rgba(0, 128, 255, 0.8); }
            100% { box-shadow: 0 0 5px rgba(0, 128, 255, 0.5); }
        }
        
        @keyframes scalability-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        @keyframes observer-wave {
            0% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0); }
        }
        
        @keyframes golden-harmony {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(5deg); }
            75% { transform: rotate(-5deg); }
            100% { transform: rotate(0deg); }
        }
        
        @keyframes quantum-superposition {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        @keyframes consciousness-expansion {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        @keyframes energy-flow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        @keyframes cosmic-flow {
            0% { width: 0%; }
            50% { width: 100%; }
            100% { width: 0%; }
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen" 
      data-controller="universal-matrix"
      data-universal-matrix-locale-value="<%= @locale %>"
      data-universal-matrix-matrix-size-value="8"
      data-universal-matrix-animation-speed-value="1000"
      data-universal-matrix-cosmic-flow-value="<%= @cosmic_flow_state %>"
      data-universal-matrix-intelligence-score-value="<%= @intelligence_score %>">
    
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold mb-4 bg-gradient-to-r from-cyan-400 to-purple-500 bg-clip-text text-transparent">
                🌌 Zeropoint - The Universal Matrix
            </h1>
            <p class="text-xl text-gray-300">
                Where Discovery Meets Intelligence in the Cosmic Flow
            </p>
        </header>

        <!-- Control Panel -->
        <div class="control-panel rounded-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-4 text-cyan-400">🎛️ Matrix Controls</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <!-- Matrix Size Control -->
                <div>
                    <label class="block text-sm font-medium mb-2">Matrix Size</label>
                    <select 
                        data-action="change->universal-matrix#resizeMatrix"
                        class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white">
                        <option value="4">4x4</option>
                        <option value="6">6x6</option>
                        <option value="8" selected>8x8</option>
                        <option value="10">10x10</option>
                        <option value="12">12x12</option>
                    </select>
                </div>

                <!-- Animation Speed Control -->
                <div>
                    <label class="block text-sm font-medium mb-2">Animation Speed</label>
                    <select 
                        data-action="change->universal-matrix#changeAnimationSpeed"
                        class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white">
                        <option value="500">Fast</option>
                        <option value="1000" selected>Normal</option>
                        <option value="2000">Slow</option>
                        <option value="3000">Very Slow</option>
                    </select>
                </div>

                <!-- Language Selection -->
                <div>
                    <label class="block text-sm font-medium mb-2">Language</label>
                    <select 
                        data-action="change->universal-matrix#changeLocale"
                        class="w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white">
                        <option value="en" <%= 'selected' if @locale == 'en' %>>English</option>
                        <option value="es" <%= 'selected' if @locale == 'es' %>>Español</option>
                        <option value="fr" <%= 'selected' if @locale == 'fr' %>>Français</option>
                    </select>
                </div>

                <!-- Cosmic Flow Status -->
                <div>
                    <label class="block text-sm font-medium mb-2">Cosmic Flow</label>
                    <div class="cosmic-flow-indicator">
                        <div class="cosmic-flow-bar"></div>
                    </div>
                    <p class="text-xs text-gray-400 mt-1">Status: <%= @cosmic_flow_state.titleize %></p>
                </div>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Universal Matrix -->
            <div class="lg:col-span-2">
                <div class="bg-gray-800 rounded-lg p-6">
                    <h2 class="text-2xl font-bold mb-4 text-cyan-400">🌌 The Matrix</h2>
                    
                    <div 
                        data-universal-matrix-target="matrix"
                        data-action="click->universal-matrix#cellClicked"
                        class="matrix-grid"
                        style="grid-template-columns: repeat(8, 1fr);">
                        <!-- Matrix cells will be generated by Stimulus -->
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="space-y-6">
                <!-- Geolocation -->
                <div class="bg-gray-800 rounded-lg p-6">
                    <h3 class="text-xl font-bold mb-4 text-green-400">🌍 Location</h3>
                    <div data-universal-matrix-target="geolocation">
                        <div class="geo-info">
                            <h4>🌍 Location</h4>
                            <p>Requesting location...</p>
                        </div>
                    </div>
                </div>

                <!-- Intelligence Meter -->
                <div class="bg-gray-800 rounded-lg p-6">
                    <h3 class="text-xl font-bold mb-4 text-purple-400">🧠 Intelligence Score</h3>
                    <div class="intelligence-meter">
                        <div class="intelligence-fill" style="width: <%= (@intelligence_score * 100).to_i %>%"></div>
                    </div>
                    <p class="text-sm text-gray-400 mt-2">Score: <%= (@intelligence_score * 100).round(1) %>%</p>
                </div>

                <!-- Observer Insights -->
                <div class="bg-gray-800 rounded-lg p-6">
                    <h3 class="text-xl font-bold mb-4 text-yellow-400">👁️ Observer Insights</h3>
                    <div data-universal-matrix-target="insight" class="space-y-2">
                        <% @observer_insights.each do |insight| %>
                            <div class="insight-item <%= insight[:sentiment] %>">
                                <p><%= insight[:insight] %></p>
                                <span class="sentiment-badge <%= insight[:sentiment] %>"><%= insight[:sentiment] %></span>
                                <span class="cluster-badge"><%= insight[:category] %></span>
                            </div>
                        <% end %>
                    </div>
                </div>

                <!-- Discovery Stats -->
                <div class="bg-gray-800 rounded-lg p-6">
                    <h3 class="text-xl font-bold mb-4 text-blue-400">📊 Matrix Stats</h3>
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span>Features:</span>
                            <span class="font-bold text-cyan-400"><%= @matrix_data[:features].count %></span>
                        </div>
                        <div class="flex justify-between">
                            <span>High Impact:</span>
                            <span class="font-bold text-green-400"><%= @matrix_data[:features].count { |f| f[:impact] > 0.9 } %></span>
                        </div>
                        <div class="flex justify-between">
                            <span>Observer Insights:</span>
                            <span class="font-bold text-yellow-400"><%= @observer_insights.count %></span>
                        </div>
                        <div class="flex justify-between">
                            <span>Cosmic Flow:</span>
                            <span class="font-bold text-purple-400"><%= @cosmic_flow_state.titleize %></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Feature Categories Legend -->
        <div class="mt-8 bg-gray-800 rounded-lg p-6">
            <h3 class="text-xl font-bold mb-4 text-cyan-400">🎨 Matrix Categories</h3>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="flex items-center space-x-2">
                    <div class="w-4 h-4 bg-gradient-to-r from-green-400 to-cyan-400 rounded"></div>
                    <span>Cosmic</span>
                </div>
                <div class="flex items-center space-x-2">
                    <div class="w-4 h-4 bg-gradient-to-r from-pink-500 to-purple-500 rounded"></div>
                    <span>Vortex</span>
                </div>
                <div class="flex items-center space-x-2">
                    <div class="w-4 h-4 bg-gradient-to-r from-blue-400 to-purple-500 rounded"></div>
                    <span>Intelligence</span>
                </div>
                <div class="flex items-center space-x-2">
                    <div class="w-4 h-4 bg-gradient-to-r from-yellow-400 to-orange-500 rounded"></div>
                    <span>Scalability</span>
                </div>
                <div class="flex items-center space-x-2">
                    <div class="w-4 h-4 bg-gradient-to-r from-cyan-400 to-blue-500 rounded"></div>
                    <span>Observer</span>
                </div>
                <div class="flex items-center space-x-2">
                    <div class="w-4 h-4 bg-gradient-to-r from-yellow-500 to-red-500 rounded"></div>
                    <span>Golden Ratio</span>
                </div>
                <div class="flex items-center space-x-2">
                    <div class="w-4 h-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded"></div>
                    <span>Quantum</span>
                </div>
                <div class="flex items-center space-x-2">
                    <div class="w-4 h-4 bg-gradient-to-r from-indigo-500 to-purple-500 rounded"></div>
                    <span>Consciousness</span>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="mt-8 text-center text-gray-400">
            <p>🌌 Zeropoint - The Universal Matrix where discovery, intelligence, and cosmic flow converge.</p>
            <p class="text-sm mt-2">Powered by Stimulus, Rails, and the Zeropoint framework</p>
        </footer>
    </div>
</body>
</html> 